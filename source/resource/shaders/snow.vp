uniform float uTime;

varying float vTime;
varying vec3 vNormal;
varying vec3 vPosWorld;
varying vec3 vPosWorldPreMove;

void main() {

	vTime = uTime;
	vNormal = normal;

	vec3 pos = position;
	vPosWorldPreMove = pos;
	pos += vNormal * sin(vTime + pos.x*0.3 + pos.z*0.3) * 1.0;

	vPosWorld = (modelMatrix * vec4(pos,1.0)).xyz;
	
  	gl_Position = projectionMatrix *
                modelViewMatrix *
                vec4(pos,1.0);
}